
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>
[<div class="message-content editor-style">
<p>在这篇文章中 <a href="http://www.cnblogs.com/biwork/p/3431257.html" target="_blank">微软BI 之SSIS 系列 - 两种将 SQL Server 数据库数据输出成 XML 文件的方法</a>，讲解了 XML 的输出操作 - 控制流中的输出和数据流中的输出。尽管在 SSIS 中没有 XML Destination，但是 XML Source 还是有的。</p><h3 id="articleHeader1" style="margin-left: 0px;">具体实现步骤</h3><p>新建一个包，在数据流中添加一个 XML Source。</p><p><img alt="" src="http://images.cnitblog.com/blog/477275/201409/022214441419964.png"/></p><p>双击并编辑 XML Source，我们的测试文件就来自于 <a href="http://www.cnblogs.com/biwork/p/3431257.html" target="_blank">微软BI 之SSIS 系列 - 两种将 SQL Server 数据库数据输出成 XML 文件的方法</a> 中的例子。</p><p>下面会有一个警告 - <span style="color: rgb(255, 0, 0);">XML Schema (XSD) is not specified. Select an existing XSD or click Generate XSD to create an XSD from the XML file。</span></p><p>关于 XSD 大家可以参看博客园一位博友的文章，<a href="http://www.cnblogs.com/newsouls/archive/2011/10/28/2227765.html" target="_blank">点击查看</a>。那么这里就直接点击 Generate XSD，它会自动根据你的 XML 文件格式为你创建一个 XML 描述文件。</p><p><img alt="" src="http://images.cnitblog.com/blog/477275/201409/022214539382772.png"/></p><p>这个文件生成的目录和你的 XML 源文件的目录是一致的。</p><p><img alt="" src="http://images.cnitblog.com/blog/477275/201409/022215103287729.png"/></p><p>中间的过程可能出现错误，比如 XML 源文件在我们的 SSIS 中无法解析，这时就会创建失败，也就无法使用 XML Source 进行数据抽取了。像下面的这个警告是没有太大问题的，因为它只是提示有些字段的长度可能需要注意，包括数据类型最好采用 DT_WSTR - 255长。</p><p><img alt="" src="http://images.cnitblog.com/blog/477275/201409/022215165002411.png"/></p><p>直接下一步可以看到 SSIS 内部对 XML 的解析之后的结果，可以看到各个不同的列。</p><p><img alt="" src="http://images.cnitblog.com/blog/477275/201409/022215265945661.png"/></p><p>当然这里要说一句的是 - 由于 XML 文件中的数据类型，包括长度无法确定的情况下，目标表上的列通常定义为字符串类型并给予合适的长度，以确保从 XML 到数据表这一加载过程是成功的。加载过程完成后，后期再来处理数据的类型，长度等。</p><p>目标表在这里的结构是 -</p><pre><code><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">CREATE</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">TABLE</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">dbo</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span>.<span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">T010_SALES_ORDER_DETAIL</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">(<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">SalesOrderID</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">SalesOrderDetailID</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">OrderQty</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">ProductID</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">UnitPrice</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">UnitPriceDiscount</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">LineTotal</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">rowguid</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">255</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
 </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">ModifiedDate</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NVARCHAR</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">50</span>) <span style="color: rgb(128, 128, 128); line-height: 1.5 !important;">NOT</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;"><br/>
) </span></code></pre><p style="margin-left: auto;">大家也可以尝试使用 XML Source 推荐的的数据表结构，可以看到它提供的推荐数据类型都和 XSD 文档定义的结构类型是相关的。</p><pre><code><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">CREATE</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">TABLE</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">dbo</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span>.<span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">T010_SALES_ORDER_DETAIL</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">(<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">SalesOrderID</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">bigint</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">SalesOrderDetailID</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">bigint</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">OrderQty</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">tinyint</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">ProductID</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">int</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">UnitPrice</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">decimal</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">28</span>, <span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">10</span>) <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">UnitPriceDiscount</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">decimal</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">28</span>, <span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">10</span>) <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">LineTotal</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">decimal</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">28</span>, <span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">10</span>) <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">rowguid</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">nvarchar</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span>(<span style="color: rgb(128, 0, 0); font-weight: bold; line-height: 1.5 !important;">255</span>) <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;">,<br/>
    </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">ModifiedDate</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">[</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">datetime</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">]</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">NULL</span><span style="color: rgb(0, 0, 0); line-height: 1.5 !important;"><br/>
) </span></code></pre><p style="margin-left: auto;">XSD 文档的定义。</p><pre><code><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;?</span><span style="color: rgb(255, 0, 255); line-height: 1.5 !important;">xml version="1.0"</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">?&gt;</span><br/>
<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:schema </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">attributeFormDefault</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="unqualified"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> elementFormDefault</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="qualified"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> xmlns:xs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="http://www.w3.org/2001/XMLSchema"</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
  <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="SalesOrder"</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
    <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:complexType</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
      <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:sequence</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
        <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> maxOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="unbounded"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="SalesOrderDetail"</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
          <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:complexType</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
            <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:sequence</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="SalesOrderID"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:unsignedInt"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="SalesOrderDetailID"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:unsignedInt"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="OrderQty"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:unsignedByte"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="ProductID"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:unsignedShort"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="UnitPrice"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:decimal"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="UnitPriceDiscount"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:decimal"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="LineTotal"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:decimal"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="rowguid"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:string"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
              <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element </span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;">minOccurs</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="0"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> name</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="ModifiedDate"</span><span style="color: rgb(255, 0, 0); line-height: 1.5 !important;"> type</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">="xs:dateTime"</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">/&gt;</span><br/>
            <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;/</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:sequence</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
          <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;/</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:complexType</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
        <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;/</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
      <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;/</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:sequence</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
    <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;/</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:complexType</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
  <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;/</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:element</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span><br/>
<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&lt;/</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">xs:schema</span><span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">&gt;</span></code></pre><p style="margin-left: auto;">执行包的效果 -</p><p><img alt="" src="http://images.cnitblog.com/blog/477275/201409/022215347038783.png"/></p><p>对比在 <a href="http://www.cnblogs.com/biwork/p/3431257.html" target="_blank">微软BI 之SSIS 系列 - 两种将 SQL Server 数据库数据输出成 XML 文件的方法</a> 文章中使用到的数据源表和这篇文章中的目标表，数据都是一样的，条数也是一致的，那么我们的处理就完成了。</p><p><img alt="" src="http://images.cnitblog.com/blog/477275/201409/022215408287478.png"/></p><h3 id="articleHeader2" style="margin-left: 0px;">总结</h3><p style="margin-left: auto;">在这里要说一下，并不是每一个 XML 文件都能顺利的解析成功的。在我以往的项目中，我遇到过来自上游程序或者客户创建的 XML 文件，有的格式的确是无法解析的，并且内容和格式也是非常复杂的。</p><p style="margin-left: auto;">对于无法解析的 XML 文件，通常会直接告诉他们这种 XML 文件无法解析，数据在 SSIS 中读取不出来。客户一般会重新处理 XML 文件，发送一个能够解析的并将此文件作为标准的通信文件与 BI 系统进行交互。</p><h3 id="articleHeader3" style="margin-left: 0px;">与 XML 相关的文章还有</h3><p style="margin-left: auto;"><a href="http://www.cnblogs.com/biwork/p/3431257.html" target="_blank">微软BI 之SSIS 系列 - 两种将 SQL Server 数据库数据输出成 XML 文件的方法</a></p>
</div>]
</body>
</html>
